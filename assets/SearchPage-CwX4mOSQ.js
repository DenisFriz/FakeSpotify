import{g as _,c as x,l as j,j as s,L as t,S as r,h as g}from"./index-LNqDGMrS.js";import{R as m,S as c}from"./SkeletonRow-DZLCiDK0.js";import{g as u}from"./getAuthors-Cz1YSSqB.js";const p=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"skeleton__list",children:[s.jsx(r,{width:253,height:265}),s.jsxs("div",{style:{width:"100%",height:"100%"},children:[s.jsx(r,{width:"100%",height:40,marginBottom:5}),s.jsx(r,{width:"100%",height:40,marginBottom:5}),s.jsx(r,{width:"100%",height:40,marginBottom:5}),s.jsx(r,{width:"100%",height:40,marginBottom:5})]})]}),s.jsx(c,{}),s.jsx(c,{}),s.jsx(c,{})]}),f=()=>{const l=_(),{query:n}=x(),{data:e,isLoading:h,isError:d}=j({query:n||"",type:["artist","playlist","track"]});if(h)return s.jsx(p,{});if(!e||d)throw new Error("An error occurred while loading search page.");const o=a=>{l(g({title:a.name,track_name:a.name,names_authors:u(a.artists),img:a.album.images[1].url,isShow:!0}))};return s.jsxs("div",{className:"search",children:[s.jsxs("div",{className:"search__top",children:[s.jsxs("div",{className:"search__left",children:[s.jsx("p",{"data-testid":"search-page",children:"Лучший результат"}),s.jsx(t,{to:`/FakeSpotify/artist/${e.artists.items[0].id}`,children:s.jsxs("div",{className:"search__artist",children:[s.jsx("img",{className:"search__img",src:e.artists.items[0].images[2].url,alt:""}),s.jsx("div",{className:"search__name",children:e.artists.items[0].name}),s.jsx("span",{children:"Исполнитель"}),s.jsx("div",{className:"hover_btn"})]})})]}),s.jsxs("div",{className:"search__right",children:[s.jsx("div",{children:"Треки"}),e.tracks.items.slice(0,4).map((a,i)=>s.jsxs("div",{onClick:()=>o(a),className:"music-item music-item--without-index",children:[s.jsxs("div",{className:"music-item__main",children:[s.jsx("img",{className:"music-item__img",src:a.album.images[2].url,alt:""}),s.jsx("div",{className:"music-item__right",children:s.jsx("div",{className:"music-item__title",children:a.name})})]}),s.jsx("div",{className:"music-item__name",children:a.name}),s.jsx("div",{className:"music-item__time",children:"3:13"})]},i))]})]}),s.jsx(m,{title:"Исполнители",classNames:"row__container-fullpage",children:e.artists.items.map((a,i)=>s.jsx(t,{to:`/FakeSpotify/artist/${a.id}`,children:s.jsxs("div",{className:"row__item row__item-artists",children:[s.jsx("img",{className:"row__img",src:a.images[0]?a.images[0].url:"",alt:""}),s.jsx("p",{className:"row__name",children:a.name}),s.jsx("p",{className:"row__authors",children:"Исполнитель"}),s.jsx("div",{className:"hover_btn"})]})},i))}),s.jsx(m,{title:"Плейлисты",classNames:"row__container-fullpage",children:e.playlists.items.map((a,i)=>s.jsx(t,{to:`/FakeSpotify/playlist/${a.id}`,children:s.jsxs("div",{className:"row__item",children:[s.jsx("img",{className:"row__img",src:a.images[0].url,alt:""}),s.jsx("p",{className:"row__name",children:a.name}),s.jsx("p",{className:"row__authors"}),s.jsx("div",{className:"hover_btn"})]})},i))})]})};export{f as default};
